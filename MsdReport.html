<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš€ Ø³ÛŒØ³ØªÙ… Ú¯Ø²Ø§Ø±Ø´â€ŒÙ†ÙˆÛŒØ³ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Ø§Ø³ØªØ§ÛŒÙ„ Ú©Ù„ÛŒ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Vazirmatn', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap');
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            overflow: hidden;
            min-height: 90vh;
        }
        
        /* Ù‡Ø¯Ø± */
        header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 5px solid #3498db;
            display: none; /* Ø§Ø¨ØªØ¯Ø§ Ù…Ø®ÙÛŒ */
        }
        
        header.logged-in {
            display: flex; /* Ø¨Ø¹Ø¯ Ø§Ø² ÙˆØ±ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ */
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 32px;
            color: #3498db;
        }
        
        .logo h1 {
            font-size: 24px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-badge {
            background: rgba(255,255,255,0.1);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        /* Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ */
        .main-nav {
            background: #f8f9fa;
            padding: 15px 30px;
            border-bottom: 1px solid #eee;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            display: none; /* Ø§Ø¨ØªØ¯Ø§ Ù…Ø®ÙÛŒ */
        }
        
        .main-nav.logged-in {
            display: flex; /* Ø¨Ø¹Ø¯ Ø§Ø² ÙˆØ±ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ */
        }
        
        .nav-btn {
            padding: 12px 20px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-btn:hover {
            border-color: #3498db;
            color: #3498db;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.2);
        }
        
        .nav-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        /* Ù…Ø­ØªÙˆØ§ */
        .content-area {
            padding: 30px;
            min-height: 70vh;
        }
        
        .page {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ÙØ±Ù…â€ŒÙ‡Ø§ */
        .form-container {
            max-width: 500px;
            margin: 0 auto;
            background: #f8f9fa;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .form-title {
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #3498db;
            font-size: 22px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-align: center;
            justify-content: center;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        textarea.form-control {
            min-height: 150px;
            resize: vertical;
        }
        
        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #27ae60, #219a52);
            color: white;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #219a52, #1e8449);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }
        
        .btn-secondary:hover {
            background: linear-gradient(135deg, #2980b9, #2573a7);
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }
        
        .btn-danger:hover {
            background: linear-gradient(135deg, #c0392b, #a93226);
            transform: translateY(-2px);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }
        
        .btn-warning:hover {
            background: linear-gradient(135deg, #e67e22, #d35400);
            transform: translateY(-2px);
        }
        
        /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ */
        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            border: 1px solid #eee;
            transition: transform 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.12);
        }
        
        .card-title {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border-top: 5px solid;
        }
        
        .stat-card.total { border-color: #3498db; }
        .stat-card.pending { border-color: #f39c12; }
        .stat-card.completed { border-color: #27ae60; }
        .stat-card.users { border-color: #9b59b6; }
        
        .stat-number {
            font-size: 36px;
            font-weight: 700;
            margin: 10px 0;
        }
        
        .stat-label {
            color: #7f8c8d;
            font-size: 14px;
        }
        
        /* Ø¬Ø¯ÙˆÙ„ */
        .table-container {
            overflow-x: auto;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }
        
        th {
            background: #2c3e50;
            color: white;
            padding: 15px;
            text-align: right;
            font-weight: 500;
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ */
        .categories-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .category-card {
            background: white;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            position: relative;
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.1);
        }
        
        .delete-category {
            position: absolute;
            top: 10px;
            left: 10px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .category-name {
            font-size: 18px;
            font-weight: bold;
            margin: 10px 0;
            color: #2c3e50;
        }
        
        .category-count {
            font-size: 14px;
            color: #7f8c8d;
        }
        
        /* Ù†ÙˆØªÙÛŒÚ©ÛŒØ´Ù† */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            z-index: 1000;
            animation: slideIn 0.5s, fadeOut 0.5s 2.5s forwards;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .notification.success { background: #27ae60; }
        .notification.error { background: #e74c3c; }
        .notification.warning { background: #f39c12; }
        .notification.info { background: #3498db; }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            to { opacity: 0; }
        }
        
        /* ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ */
        .login-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .login-header h1 {
            color: white;
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .login-header p {
            color: rgba(255,255,255,0.8);
            font-size: 16px;
        }
        
        /* Ù…ÙˆØ¨Ø§ÛŒÙ„ */
        @media (max-width: 768px) {
            .container {
                border-radius: 10px;
            }
            
            .main-nav {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 70px;
                right: 20px;
                background: white;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.15);
                z-index: 100;
                padding: 15px;
                width: 250px;
            }
            
            .main-nav.active {
                display: flex;
            }
            
            .hamburger-menu {
                display: block;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .user-info {
                display: none;
            }
            
            .content-area {
                padding: 20px;
            }
            
            .form-container {
                padding: 20px;
            }
            
            .login-header h1 {
                font-size: 24px;
            }
            
            .categories-container {
                grid-template-columns: 1fr;
            }
        }
        
        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ÙˆØ±ÙˆØ¯/Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… */
        .auth-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
        }
        
        .auth-btn {
            flex: 1;
            max-width: 200px;
        }
        
        /* Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ø¯Ø± ÙØ±Ù… Ú¯Ø²Ø§Ø±Ø´ */
        .category-select-container {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .category-select-container select {
            flex: 1;
        }
        
        .category-select-container button {
            white-space: nowrap;
        }
        
        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ */
        .search-box {
            position: relative;
            margin-bottom: 20px;
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: 2px solid #3498db;
            border-radius: 8px;
            font-size: 16px;
        }
        
        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #3498db;
        }
        
        .filter-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        
        /* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ ØµÙØ­Ù‡ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ */
        .advanced-search-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .search-results-count {
            background: #3498db;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: inline-block;
        }
    </style>
</head>
<body>
    <!-- Ù‡Ø¯Ø± Ø¨Ø±Ø§ÛŒ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ -->
    <div class="login-header">
        <h1>ğŸš€ Ø³ÛŒØ³ØªÙ… Ú¯Ø²Ø§Ø±Ø´â€ŒÙ†ÙˆÛŒØ³ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</h1>
        <p>Ù…Ø¯ÛŒØ±ÛŒØª Ù‡ÙˆØ´Ù…Ù†Ø¯ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ</p>
    </div>
    
    <div class="container">
        <!-- Ù‡Ø¯Ø± Ø§ØµÙ„ÛŒ (ÙÙ‚Ø· Ø¨Ø¹Ø¯ Ø§Ø² ÙˆØ±ÙˆØ¯) -->
        <header id="mainHeader">
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                <h1>Ø³ÛŒØ³ØªÙ… Ú¯Ø²Ø§Ø±Ø´â€ŒÙ†ÙˆÛŒØ³ÛŒ</h1>
            </div>
            
            <div class="hamburger-menu" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </div>
            
            <div class="user-info">
                <div class="user-badge" id="userBadge">
                    <i class="fas fa-user"></i>
                    <span id="userName">Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯</span>
                    <span id="userRole"></span>
                </div>
                <button class="btn btn-danger" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬
                </button>
            </div>
        </header>
        
        <!-- Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ (ÙÙ‚Ø· Ø¨Ø¹Ø¯ Ø§Ø² ÙˆØ±ÙˆØ¯) -->
        <nav class="main-nav" id="mainNav">
            <button class="nav-btn" onclick="showPage('dashboard')" id="btnDashboard">
                <i class="fas fa-tachometer-alt"></i> Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
            </button>
            <button class="nav-btn" onclick="showPage('newReport')" id="btnNewReport">
                <i class="fas fa-plus-circle"></i> Ú¯Ø²Ø§Ø±Ø´ Ø¬Ø¯ÛŒØ¯
            </button>
            <button class="nav-btn" onclick="showPage('reports')" id="btnReports">
                <i class="fas fa-list"></i> Ù‡Ù…Ù‡ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§
            </button>
            <button class="nav-btn" onclick="showPage('search')" id="btnSearch">
                <i class="fas fa-search"></i> Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡
            </button>
            <button class="nav-btn" onclick="showPage('categories')" id="btnCategories">
                <i class="fas fa-tags"></i> Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§
            </button>
            <button class="nav-btn" onclick="showPage('users')" id="btnUsers">
                <i class="fas fa-users"></i> Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
            </button>
            <button class="nav-btn" onclick="showPage('admin')" id="btnAdmin">
                <i class="fas fa-cog"></i> Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÛŒØ³ØªÙ…
            </button>
            <button class="nav-btn" onclick="showPage('profile')" id="btnProfile">
                <i class="fas fa-user-cog"></i> Ù¾Ø±ÙˆÙØ§ÛŒÙ„
            </button>
        </nav>
        
        <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ -->
        <div class="content-area">
            <!-- ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ -->
            <div class="page active" id="loginPage">
                <div class="form-container">
                    <h2 class="form-title"><i class="fas fa-lock"></i> ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…</h2>
                    <div class="form-group">
                        <label class="form-label">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</label>
                        <input type="text" class="form-control" id="loginUsername" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                        <input type="password" class="form-control" id="loginPassword" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
                    </div>
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="login()" style="width: 100%">
                            <i class="fas fa-sign-in-alt"></i> ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…
                        </button>
                    </div>
                    
                    <div class="auth-buttons">
                        <button class="btn btn-secondary auth-btn" onclick="showPage('register')">
                            <i class="fas fa-user-plus"></i> Ø«Ø¨Øª Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
                        </button>
                    </div>
                    
                    <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ±ÙˆØ¯ Ø­Ø°Ù Ø´Ø¯Ù‡ -->
                </div>
            </div>
            
            <!-- ØµÙØ­Ù‡ Ø«Ø¨Øª Ù†Ø§Ù… -->
            <div class="page" id="registerPage">
                <div class="form-container">
                    <h2 class="form-title"><i class="fas fa-user-plus"></i> Ø«Ø¨Øª Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯</h2>
                    <div class="form-group">
                        <label class="form-label">Ù†Ø§Ù… Ú©Ø§Ù…Ù„</label>
                        <input type="text" class="form-control" id="regFullName" placeholder="Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</label>
                        <input type="text" class="form-control" id="regUsername" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¯Ù„Ø®ÙˆØ§Ù‡">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                        <input type="password" class="form-control" id="regPassword" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù‚ÙˆÛŒ">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                        <input type="password" class="form-control" id="regConfirmPassword" placeholder="ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ø§ÛŒÙ…ÛŒÙ„</label>
                        <input type="email" class="form-control" id="regEmail" placeholder="example@email.com">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ø³Ù…Øª Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ</label>
                        <select class="form-control" id="regPosition">
                            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                            <option value="Ù…Ø¯ÛŒØ±">Ù…Ø¯ÛŒØ±</option>
                            <option value="Ú©Ø§Ø±Ø´Ù†Ø§Ø³">Ú©Ø§Ø±Ø´Ù†Ø§Ø³</option>
                            <option value="Ú©Ø§Ø±Ù…Ù†Ø¯">Ú©Ø§Ø±Ù…Ù†Ø¯</option>
                            <option value="Ù…Ø¯ÛŒØ±ÛŒØª">Ù…Ø¯ÛŒØ±ÛŒØª</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="registerUser()" style="width: 100%">
                            <i class="fas fa-user-plus"></i> Ø«Ø¨Øª Ù†Ø§Ù…
                        </button>
                        <button class="btn btn-secondary" onclick="showPage('login')" style="width: 100%; margin-top: 10px;">
                            <i class="fas fa-arrow-right"></i> Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ -->
            <div class="page" id="dashboardPage">
                <div class="stats-grid">
                    <div class="stat-card total">
                        <i class="fas fa-file-alt fa-2x" style="color: #3498db;"></i>
                        <div class="stat-number" id="totalReports">0</div>
                        <div class="stat-label">Ú©Ù„ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</div>
                    </div>
                    <div class="stat-card pending">
                        <i class="fas fa-clock fa-2x" style="color: #f39c12;"></i>
                        <div class="stat-number" id="pendingReports">0</div>
                        <div class="stat-label">Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</div>
                    </div>
                    <div class="stat-card completed">
                        <i class="fas fa-check-circle fa-2x" style="color: #27ae60;"></i>
                        <div class="stat-number" id="completedReports">0</div>
                        <div class="stat-label">Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</div>
                    </div>
                    <div class="stat-card users">
                        <i class="fas fa-users fa-2x" style="color: #9b59b6;"></i>
                        <div class="stat-number" id="totalUsers">0</div>
                        <div class="stat-label">Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙØ¹Ø§Ù„</div>
                    </div>
                </div>
                
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-chart-bar"></i> Ø¢Ù…Ø§Ø± Ù…Ø§Ù‡Ø§Ù†Ù‡ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</h3>
                    <div style="height: 300px; position: relative;">
                        <canvas id="reportsChart"></canvas>
                    </div>
                </div>
                
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-bell"></i> Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±</h3>
                    <div id="notificationsList">
                        <!-- Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                    </div>
                </div>
                
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-history"></i> Ø¢Ø®Ø±ÛŒÙ† Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</h3>
                    <div id="recentReports">
                        <!-- Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ± -->
                    </div>
                </div>
            </div>
            
            <!-- Ú¯Ø²Ø§Ø±Ø´ Ø¬Ø¯ÛŒØ¯ -->
            <div class="page" id="newReportPage">
                <div class="form-container">
                    <h2 class="form-title"><i class="fas fa-plus-circle"></i> Ø«Ø¨Øª Ú¯Ø²Ø§Ø±Ø´ Ø¬Ø¯ÛŒØ¯</h2>
                    <div class="form-group">
                        <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ú¯Ø²Ø§Ø±Ø´</label>
                        <input type="text" class="form-control" id="reportTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ú¯Ø²Ø§Ø±Ø´ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</label>
                        <div class="category-select-container">
                            <select class="form-control" id="reportCategory">
                                <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</option>
                                <!-- Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                            </select>
                            <button class="btn btn-secondary" onclick="showPage('categories')">
                                <i class="fas fa-cog"></i> Ù…Ø¯ÛŒØ±ÛŒØª
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ø§ÙˆÙ„ÙˆÛŒØª</label>
                        <select class="form-control" id="reportPriority">
                            <option value="low">Ú©Ù…</option>
                            <option value="medium" selected>Ù…ØªÙˆØ³Ø·</option>
                            <option value="high">Ø¨Ø§Ù„Ø§</option>
                            <option value="critical">Ø¨Ø­Ø±Ø§Ù†ÛŒ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©Ø§Ù…Ù„</label>
                        <textarea class="form-control" id="reportDescription" placeholder="Ø´Ø±Ø­ Ú©Ø§Ù…Ù„ Ú¯Ø²Ø§Ø±Ø´ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="saveReport()" style="width: 100%">
                            <i class="fas fa-save"></i> Ø°Ø®ÛŒØ±Ù‡ Ú¯Ø²Ø§Ø±Ø´
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Ù‡Ù…Ù‡ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ -->
            <div class="page" id="reportsPage">
                <div class="filter-container">
                    <h3 style="margin-bottom: 15px;"><i class="fas fa-filter"></i> ÙÛŒÙ„ØªØ±Ù‡Ø§</h3>
                    <div class="filter-row">
                        <div class="filter-group">
                            <label class="form-label">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</label>
                            <select class="form-control" id="filterCategory" onchange="filterReports()">
                                <option value="">Ù‡Ù…Ù‡ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</option>
                                <!-- Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="form-label">Ø§ÙˆÙ„ÙˆÛŒØª</label>
                            <select class="form-control" id="filterPriority" onchange="filterReports()">
                                <option value="">Ù‡Ù…Ù‡ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒÙ‡Ø§</option>
                                <option value="low">Ú©Ù…</option>
                                <option value="medium">Ù…ØªÙˆØ³Ø·</option>
                                <option value="high">Ø¨Ø§Ù„Ø§</option>
                                <option value="critical">Ø¨Ø­Ø±Ø§Ù†ÛŒ</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="form-label">ÙˆØ¶Ø¹ÛŒØª</label>
                            <select class="form-control" id="filterStatus" onchange="filterReports()">
                                <option value="">Ù‡Ù…Ù‡ ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§</option>
                                <option value="new">Ø¬Ø¯ÛŒØ¯</option>
                                <option value="pending">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ</option>
                                <option value="completed">ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§..." onkeyup="searchReports()">
                    <div class="search-icon"><i class="fas fa-search"></i></div>
                </div>
                
                <div class="table-container">
                    <table id="reportsTable">
                        <thead>
                            <tr>
                                <th>Ø´Ù†Ø§Ø³Ù‡</th>
                                <th>Ø¹Ù†ÙˆØ§Ù†</th>
                                <th>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</th>
                                <th>Ø§ÙˆÙ„ÙˆÛŒØª</th>
                                <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                <th>ØªØ§Ø±ÛŒØ®</th>
                                <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="reportsTableBody">
                            <!-- Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 20px; text-align: center;">
                    <button class="btn btn-secondary" onclick="exportToExcel()">
                        <i class="fas fa-file-excel"></i> Ø®Ø±ÙˆØ¬ÛŒ Excel
                    </button>
                </div>
            </div>
            
            <!-- Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ -->
            <div class="page" id="searchPage">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-search"></i> Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</h3>
                    
                    <div class="form-container">
                        <!-- ÙØ±Ù… Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ -->
                        <div class="form-group">
                            <label class="form-label">Ú©Ù„Ù…Ù‡ Ú©Ù„ÛŒØ¯ÛŒ</label>
                            <input type="text" class="form-control" id="searchKeyword" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø¹Ù†ÙˆØ§Ù†ØŒ ØªÙˆØ¶ÛŒØ­Ø§ØªØŒ Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡...">
                        </div>
                        
                        <div class="advanced-search-grid">
                            <div class="form-group">
                                <label class="form-label">Ø§Ø² ØªØ§Ø±ÛŒØ®</label>
                                <input type="date" class="form-control" id="searchDateFrom">
                            </div>
                            <div class="form-group">
                                <label class="form-label">ØªØ§ ØªØ§Ø±ÛŒØ®</label>
                                <input type="date" class="form-control" id="searchDateTo">
                            </div>
                        </div>
                        
                        <div class="advanced-search-grid">
                            <div class="form-group">
                                <label class="form-label">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</label>
                                <select class="form-control" id="searchCategory">
                                    <option value="">Ù‡Ù…Ù‡ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</option>
                                    <!-- Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Ø§ÙˆÙ„ÙˆÛŒØª</label>
                                <select class="form-control" id="searchPriority">
                                    <option value="">Ù‡Ù…Ù‡ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒÙ‡Ø§</option>
                                    <option value="low">Ú©Ù…</option>
                                    <option value="medium">Ù…ØªÙˆØ³Ø·</option>
                                    <option value="high">Ø¨Ø§Ù„Ø§</option>
                                    <option value="critical">Ø¨Ø­Ø±Ø§Ù†ÛŒ</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="advanced-search-grid">
                            <div class="form-group">
                                <label class="form-label">ÙˆØ¶Ø¹ÛŒØª</label>
                                <select class="form-control" id="searchStatus">
                                    <option value="">Ù‡Ù…Ù‡ ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§</option>
                                    <option value="new">Ø¬Ø¯ÛŒØ¯</option>
                                    <option value="pending">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ</option>
                                    <option value="completed">ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡</label>
                                <select class="form-control" id="searchAuthor">
                                    <option value="">Ù‡Ù…Ù‡ Ù†ÙˆÛŒØ³Ù†Ø¯Ú¯Ø§Ù†</option>
                                    <!-- Ù†ÙˆÛŒØ³Ù†Ø¯Ú¯Ø§Ù† Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <button class="btn btn-primary" onclick="performAdvancedSearch()" style="width: 100%">
                                <i class="fas fa-search"></i> Ø§Ø¬Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡
                            </button>
                            <button class="btn btn-secondary" onclick="resetAdvancedSearch()" style="width: 100%; margin-top: 10px;">
                                <i class="fas fa-redo"></i> Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ ÙØ±Ù…
                            </button>
                        </div>
                    </div>
                    
                    <!-- Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬Ùˆ -->
                    <div style="margin-top: 30px;">
                        <h4 class="card-title"><i class="fas fa-list"></i> Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬Ùˆ</h4>
                        <div id="searchResultsCount" class="search-results-count" style="display: none;">
                            ØªØ¹Ø¯Ø§Ø¯ Ù†ØªØ§ÛŒØ¬: <span id="resultsCount">0</span>
                        </div>
                        <div class="table-container" style="margin-top: 15px;">
                            <table id="searchResultsTable">
                                <thead>
                                    <tr>
                                        <th>Ø´Ù†Ø§Ø³Ù‡</th>
                                        <th>Ø¹Ù†ÙˆØ§Ù†</th>
                                        <th>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</th>
                                        <th>Ø§ÙˆÙ„ÙˆÛŒØª</th>
                                        <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                        <th>Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡</th>
                                        <th>ØªØ§Ø±ÛŒØ®</th>
                                        <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                    </tr>
                                </thead>
                                <tbody id="searchResultsBody">
                                    <!-- Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬Ùˆ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div style="margin-top: 20px; text-align: center;">
                            <button class="btn btn-success" onclick="exportSearchResults()" id="exportSearchBtn" style="display: none;">
                                <i class="fas fa-file-excel"></i> Ø®Ø±ÙˆØ¬ÛŒ Excel Ø§Ø² Ù†ØªØ§ÛŒØ¬
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ -->
            <div class="page" id="categoriesPage">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-tags"></i> Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</h3>
                    
                    <div style="margin-bottom: 25px;">
                        <h4>Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¬Ø¯ÛŒØ¯</h4>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" class="form-control" id="newCategoryName" placeholder="Ù†Ø§Ù… Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¬Ø¯ÛŒØ¯">
                            <button class="btn btn-success" onclick="addNewCategory()">
                                <i class="fas fa-plus"></i> Ø§ÙØ²ÙˆØ¯Ù†
                            </button>
                        </div>
                        <div id="categoryMessage" style="margin-top: 10px;"></div>
                    </div>
                    
                    <h4>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯</h4>
                    <div id="categoriesList" class="categories-container">
                        <!-- Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                    </div>
                </div>
            </div>
            
            <!-- Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† -->
            <div class="page" id="usersPage">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-users"></i> Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h3>
                    <div style="margin-bottom: 20px;">
                        <button class="btn btn-primary" onclick="showAddUserModal()">
                            <i class="fas fa-user-plus"></i> Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
                        </button>
                    </div>
                    
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</th>
                                    <th>Ù†Ø§Ù… Ú©Ø§Ù…Ù„</th>
                                    <th>Ø§ÛŒÙ…ÛŒÙ„</th>
                                    <th>Ù†Ù‚Ø´</th>
                                    <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                    <th>ØªØ§Ø±ÛŒØ® Ø¹Ø¶ÙˆÛŒØª</th>
                                    <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <!-- Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÛŒØ³ØªÙ… -->
            <div class="page" id="adminPage">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-cog"></i> ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…</h3>
                    
                    <div class="form-group">
                        <label class="form-label">Ù†Ø§Ù… Ø³ÛŒØ³ØªÙ…</label>
                        <input type="text" class="form-control" id="systemName" value="Ø³ÛŒØ³ØªÙ… Ú¯Ø²Ø§Ø±Ø´â€ŒÙ†ÙˆÛŒØ³ÛŒ">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ø­Ø¯Ø§Ú©Ø«Ø± Ø³Ø§ÛŒØ² ÙØ§ÛŒÙ„ Ù¾ÛŒÙˆØ³Øª (MB)</label>
                        <input type="number" class="form-control" id="maxFileSize" value="10">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">ØªØ¹Ø¯Ø§Ø¯ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</label>
                        <input type="number" class="form-control" id="retentionDays" value="365">
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="saveSystemSettings()">
                            <i class="fas fa-save"></i> Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
                        </button>
                    </div>
                </div>
                
                <div class="card" style="margin-top: 20px;">
                    <h3 class="card-title"><i class="fas fa-database"></i> Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÚ¯ÛŒØ±ÛŒ Ùˆ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ</h3>
                    
                    <div style="display: flex; gap: 15px; margin-bottom: 15px;">
                        <button class="btn btn-secondary" onclick="backupData()">
                            <i class="fas fa-download"></i> Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÚ¯ÛŒØ±ÛŒ
                        </button>
                        <button class="btn btn-secondary" onclick="restoreData()">
                            <i class="fas fa-upload"></i> Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø±ÛŒ -->
            <div class="page" id="profilePage">
                <div class="form-container">
                    <h2 class="form-title"><i class="fas fa-user-cog"></i> Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø±ÛŒ</h2>
                    
                    <div class="form-group">
                        <label class="form-label">Ù†Ø§Ù… Ú©Ø§Ù…Ù„</label>
                        <input type="text" class="form-control" id="profileFullName" placeholder="Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ø§ÛŒÙ…ÛŒÙ„</label>
                        <input type="email" class="form-control" id="profileEmail" placeholder="example@email.com">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡</label>
                        <input type="tel" class="form-control" id="profilePhone" placeholder="09123456789">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
                        <input type="password" class="form-control" id="profileNewPassword" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯</label>
                        <input type="password" class="form-control" id="profileConfirmPassword" placeholder="ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯">
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="updateProfile()" style="width: 100%">
                            <i class="fas fa-save"></i> Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù¾Ø±ÙˆÙØ§ÛŒÙ„
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Ø§Ø¹Ù„Ø§Ù† -->
    <div id="notificationContainer"></div>
    
    <script>
        // ==================== Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ… ====================
        let currentUser = null;
        let reports = JSON.parse(localStorage.getItem('reports')) || [];
        let users = JSON.parse(localStorage.getItem('users')) || [
            {
                id: 1,
                username: 'admin',
                password: 'admin123',
                fullName: 'Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…',
                email: 'admin@system.com',
                position: 'Ù…Ø¯ÛŒØ±',
                role: 'admin',
                phone: '09123456789',
                status: 'active',
                createdAt: new Date().toLocaleDateString('fa-IR')
            }
        ];
        
        // Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶
        let categories = JSON.parse(localStorage.getItem('categories')) || [
            'Ø±Ø§Ø¯Ø§Ø±',
            'Ø§ØªÙˆÙ…Ø§Ø³ÛŒÙˆÙ† Ø±Ø§Ø¯Ø§Ø±',
            'Ù¾Ø±ÙˆÚ†',
            'Ø±Ø§Ø¯Ø§Ø± Ù…ÛŒØ±Ø²Ø§ Ø§Ø±ØªØ¨Ø§Ø·ÛŒ',
            'Ø³ÛŒØ³ØªÙ… Ù‡Ø§ÛŒ Ø¨Ø§Ø²Ø±Ø³ÛŒ',
            'Ø§ÛŒÚ©Ø³ Ø±ÛŒ',
            'Ú¯ÛŒØª ÙˆÛŒ',
            'Ù†Ø§ÙˆØ¨Ø±ÛŒ',
            'DVOR',
            'VOR',
            'LLZ',
            'GP',
            'NDB'
        ];
        
        let systemSettings = JSON.parse(localStorage.getItem('systemSettings')) || {
            systemName: 'Ø³ÛŒØ³ØªÙ… Ú¯Ø²Ø§Ø±Ø´â€ŒÙ†ÙˆÛŒØ³ÛŒ',
            maxFileSize: 10,
            retentionDays: 365
        };
        
        // ==================== ØªÙˆØ§Ø¨Ø¹ Ø¹Ù…ÙˆÙ…ÛŒ ====================
        function showNotification(message, type = 'info') {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                ${message}
            `;
            container.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }
        
        function showPage(pageId) {
            // Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ ØµÙØ­Ø§Øª
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            
            // Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±
            document.getElementById(pageId + 'Page').classList.add('active');
            const btn = document.getElementById('btn' + pageId.charAt(0).toUpperCase() + pageId.slice(1));
            if (btn) btn.classList.add('active');
            
            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø­ØªÙˆØ§ÛŒ ØµÙØ­Ù‡
            if (pageId === 'dashboard') {
                updateDashboard();
            } else if (pageId === 'newReport') {
                loadCategoriesForReport();
            } else if (pageId === 'reports') {
                filterReports();
                loadCategoriesForFilter();
            } else if (pageId === 'categories') {
                loadCategoriesForManagement();
            } else if (pageId === 'users') {
                updateUsersTable();
            } else if (pageId === 'search') {
                loadAdvancedSearchFilters();
                resetAdvancedSearch();
            } else if (pageId === 'profile') {
                loadProfileData();
            }
        }
        
        function toggleMenu() {
            document.getElementById('mainNav').classList.toggle('active');
        }
        
        // ==================== ØªÙˆØ§Ø¨Ø¹ ÙˆØ±ÙˆØ¯ Ùˆ Ø«Ø¨Øª Ù†Ø§Ù… ====================
        function login() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            
            if (!username || !password) {
                showNotification('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ùˆ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            const user = users.find(u => u.username === username && u.password === password && u.status === 'active');
            
            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(user));
                
                // Ù†Ù…Ø§ÛŒØ´ Ù‡Ø¯Ø± Ùˆ Ù…Ù†Ùˆ
                document.getElementById('mainHeader').classList.add('logged-in');
                document.getElementById('mainNav').classList.add('logged-in');
                
                // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
                document.getElementById('userName').textContent = user.fullName;
                document.getElementById('userRole').textContent = `(${user.role === 'admin' ? 'Ù…Ø¯ÛŒØ±' : 'Ú©Ø§Ø±Ø¨Ø±'})`;
                
                // Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
                showPage('dashboard');
                
                // Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† Ù…Ù†ÙˆÙ‡Ø§ÛŒ Ø§Ø¯Ù…ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…Ø¹Ù…ÙˆÙ„ÛŒ
                if (user.role !== 'admin') {
                    document.getElementById('btnAdmin').style.display = 'none';
                    document.getElementById('btnUsers').style.display = 'none';
                    document.getElementById('btnCategories').style.display = 'none';
                } else {
                    document.getElementById('btnAdmin').style.display = 'block';
                    document.getElementById('btnUsers').style.display = 'block';
                    document.getElementById('btnCategories').style.display = 'block';
                }
                
                showNotification(`Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ ${user.fullName}`, 'success');
            } else {
                showNotification('Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª', 'error');
            }
        }
        
        function registerUser() {
            const fullName = document.getElementById('regFullName').value.trim();
            const username = document.getElementById('regUsername').value.trim();
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            const email = document.getElementById('regEmail').value.trim();
            const position = document.getElementById('regPosition').value;
            
            // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
            if (!fullName || !username || !password || !confirmPassword || !email || !position) {
                showNotification('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ùˆ ØªÚ©Ø±Ø§Ø± Ø¢Ù† ÛŒÚ©Ø³Ø§Ù† Ù†ÛŒØ³ØªÙ†Ø¯', 'error');
                return;
            }
            
            if (users.some(u => u.username === username)) {
                showNotification('Ø§ÛŒÙ† Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª', 'error');
                return;
            }
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
            const newUser = {
                id: users.length + 1,
                username: username,
                password: password,
                fullName: fullName,
                email: email,
                position: position,
                role: 'user',
                phone: '',
                status: 'active',
                createdAt: new Date().toLocaleDateString('fa-IR')
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ±Ù…
            document.getElementById('regFullName').value = '';
            document.getElementById('regUsername').value = '';
            document.getElementById('regPassword').value = '';
            document.getElementById('regConfirmPassword').value = '';
            document.getElementById('regEmail').value = '';
            document.getElementById('regPosition').value = '';
            
            showNotification('Ø«Ø¨Øª Ù†Ø§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯. Ø§Ú©Ù†ÙˆÙ† Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯.', 'success');
            showPage('login');
        }
        
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            
            // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù‡Ø¯Ø± Ùˆ Ù…Ù†Ùˆ
            document.getElementById('mainHeader').classList.remove('logged-in');
            document.getElementById('mainNav').classList.remove('logged-in');
            
            // Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯
            showPage('login');
            
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ÙˆØ±ÙˆØ¯
            document.getElementById('loginUsername').value = '';
            document.getElementById('loginPassword').value = '';
            
            showNotification('Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø² Ø³ÛŒØ³ØªÙ… Ø®Ø§Ø±Ø¬ Ø´Ø¯ÛŒØ¯', 'info');
        }
        
        // ==================== ØªÙˆØ§Ø¨Ø¹ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ====================
        function updateDashboard() {
            // Ø¢Ù…Ø§Ø±
            const total = reports.length;
            const pending = reports.filter(r => r.status === 'pending').length;
            const completed = reports.filter(r => r.status === 'completed').length;
            const activeUsers = users.filter(u => u.status === 'active').length;
            
            document.getElementById('totalReports').textContent = total;
            document.getElementById('pendingReports').textContent = pending;
            document.getElementById('completedReports').textContent = completed;
            document.getElementById('totalUsers').textContent = activeUsers;
            
            // Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§
            updateNotifications();
            
            // Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±
            updateRecentReports();
            
            // Ù†Ù…ÙˆØ¯Ø§Ø±
            updateChart();
        }
        
        function updateNotifications() {
            const container = document.getElementById('notificationsList');
            if (!container) return;
            
            const notifications = [
                { message: `${reports.length} Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª`, time: 'Ø§Ù…Ø±ÙˆØ²', type: 'info' },
                { message: `${users.length} Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø±Ø¯Ù‡â€ŒØ§Ù†Ø¯`, time: 'Ø§Ù…Ø±ÙˆØ²', type: 'success' },
                { message: `${categories.length} Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ ÙØ¹Ø§Ù„ Ø§Ø³Øª`, time: 'Ù‡Ù… Ø§Ú©Ù†ÙˆÙ†', type: 'info' }
            ];
            
            container.innerHTML = notifications.map(notif => `
                <div style="padding: 10px; border-bottom: 1px solid #eee; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-${notif.type === 'warning' ? 'exclamation-triangle' : notif.type === 'success' ? 'check-circle' : 'info-circle'}" 
                       style="color: ${notif.type === 'warning' ? '#f39c12' : notif.type === 'success' ? '#27ae60' : '#3498db'}"></i>
                    <div style="flex: 1;">
                        <div>${notif.message}</div>
                        <small style="color: #7f8c8d;">${notif.time}</small>
                    </div>
                </div>
            `).join('');
        }
        
        function updateRecentReports() {
            const container = document.getElementById('recentReports');
            if (!container) return;
            
            const recent = reports.slice(-5).reverse();
            
            if (recent.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #7f8c8d; padding: 20px;">Ù‡Ù†ÙˆØ² Ú¯Ø²Ø§Ø±Ø´ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>';
                return;
            }
            
            container.innerHTML = recent.map(report => `
                <div style="padding: 15px; border-bottom: 1px solid #eee; margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <strong>${report.title}</strong>
                        <span style="background: ${getPriorityColor(report.priority)}; color: white; padding: 2px 8px; border-radius: 10px; font-size: 12px;">
                            ${getPriorityText(report.priority)}
                        </span>
                    </div>
                    <div style="color: #666; font-size: 14px; margin-bottom: 5px;">
                        ${report.description.substring(0, 100)}...
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 12px; color: #7f8c8d;">
                        <span>${report.category} - ${report.author}</span>
                        <span>${report.date}</span>
                    </div>
                </div>
            `).join('');
        }
        
        function updateChart() {
            const ctx = document.getElementById('reportsChart');
            if (!ctx) return;
            
            // Ø§Ú¯Ø± Ù†Ù…ÙˆØ¯Ø§Ø± Ù‚Ø¨Ù„ÛŒ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ØŒ Ø¢Ù† Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†
            if (window.reportsChartInstance) {
                window.reportsChartInstance.destroy();
            }
            
            // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡ Ø¨Ø±Ø§ÛŒ Ù†Ù…ÙˆØ¯Ø§Ø±
            const months = ['ÙØ±ÙˆØ±Ø¯ÛŒÙ†', 'Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª', 'Ø®Ø±Ø¯Ø§Ø¯', 'ØªÛŒØ±', 'Ù…Ø±Ø¯Ø§Ø¯', 'Ø´Ù‡Ø±ÛŒÙˆØ±'];
            const reportCounts = [12, 19, 8, 15, 12, 17];
            
            window.reportsChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'ØªØ¹Ø¯Ø§Ø¯ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§',
                        data: reportCounts,
                        backgroundColor: 'rgba(52, 152, 219, 0.7)',
                        borderColor: 'rgba(52, 152, 219, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                precision: 0
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                font: {
                                    family: 'Vazirmatn'
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // ==================== ØªÙˆØ§Ø¨Ø¹ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ ====================
        function loadCategoriesForReport() {
            const select = document.getElementById('reportCategory');
            if (!select) return;
            
            select.innerHTML = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</option>' +
                categories.map(cat => `<option value="${cat}">${cat}</option>`).join('');
        }
        
        function loadCategoriesForFilter() {
            const select = document.getElementById('filterCategory');
            if (!select) return;
            
            select.innerHTML = '<option value="">Ù‡Ù…Ù‡ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</option>' +
                categories.map(cat => `<option value="${cat}">${cat}</option>`).join('');
        }
        
        function loadCategoriesForManagement() {
            const container = document.getElementById('categoriesList');
            if (!container) return;
            
            if (categories.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #7f8c8d; padding: 20px;">Ù‡ÛŒÚ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ ØªØ¹Ø±ÛŒÙ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>';
                return;
            }
            
            container.innerHTML = categories.map((category, index) => {
                const reportCount = reports.filter(r => r.category === category).length;
                return `
                    <div class="category-card">
                        ${currentUser?.role === 'admin' ? `
                            <button class="delete-category" onclick="deleteCategory(${index})" 
                                    ${reportCount > 0 ? 'disabled style="background: #95a5a6;" title="Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡ Ø¯Ø§Ø±Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´ Ø§Ø³Øª"' : ''}>
                                âœ•
                            </button>
                        ` : ''}
                        <div class="category-name">${category}</div>
                        <div class="category-count">${reportCount} Ú¯Ø²Ø§Ø±Ø´</div>
                    </div>
                `;
            }).join('');
        }
        
        function addNewCategory() {
            if (currentUser?.role !== 'admin') {
                showNotification('Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯', 'error');
                return;
            }
            
            const input = document.getElementById('newCategoryName');
            const name = input.value.trim();
            const messageDiv = document.getElementById('categoryMessage');
            
            if (!name) {
                messageDiv.innerHTML = '<span style="color: red;">Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</span>';
                return;
            }
            
            if (categories.includes(name)) {
                messageDiv.innerHTML = '<span style="color: red;">Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù‚Ø¨Ù„Ø§Ù‹ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯</span>';
                return;
            }
            
            categories.push(name);
            localStorage.setItem('categories', JSON.stringify(categories));
            
            input.value = '';
            messageDiv.innerHTML = '<span style="color: green;">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯</span>';
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´
            loadCategoriesForManagement();
            loadCategoriesForReport();
            loadCategoriesForFilter();
            loadAdvancedSearchFilters();
            
            setTimeout(() => {
                messageDiv.innerHTML = '';
            }, 2000);
        }
        
        function deleteCategory(index) {
            if (currentUser?.role !== 'admin') {
                showNotification('Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø­Ø°Ù Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯', 'error');
                return;
            }
            
            const category = categories[index];
            const reportCount = reports.filter(r => r.category === category).length;
            
            if (reportCount > 0) {
                if (!confirm(`Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ ${reportCount} Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø§Ø±Ø¯. Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¢Ù† Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ`)) {
                    return;
                }
                
                // Ø§Ù†ØªÙ‚Ø§Ù„ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ø¨Ù‡ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¯ÛŒÚ¯Ø±
                const newCategory = prompt(`Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªÙ‡ "${category}" Ø±Ø§ Ø¨Ù‡ Ú©Ø¯Ø§Ù… Ø¯Ø³ØªÙ‡ Ù…Ù†ØªÙ‚Ù„ Ú©Ù†ÛŒÙ…ØŸ`, categories[0]);
                if (!newCategory || !categories.includes(newCategory)) {
                    showNotification('Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù…Ø¹ØªØ¨Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯', 'error');
                    return;
                }
                
                reports.forEach(report => {
                    if (report.category === category) {
                        report.category = newCategory;
                    }
                });
                localStorage.setItem('reports', JSON.stringify(reports));
            }
            
            categories.splice(index, 1);
            localStorage.setItem('categories', JSON.stringify(categories));
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´
            loadCategoriesForManagement();
            loadCategoriesForReport();
            loadCategoriesForFilter();
            loadAdvancedSearchFilters();
            
            showNotification('Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯', 'success');
        }
        
        // ==================== ØªÙˆØ§Ø¨Ø¹ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ ====================
        function saveReport() {
            const title = document.getElementById('reportTitle').value.trim();
            const category = document.getElementById('reportCategory').value;
            const priority = document.getElementById('reportPriority').value;
            const description = document.getElementById('reportDescription').value.trim();
            
            if (!title || !category || !description) {
                showNotification('Ù„Ø·ÙØ§Ù‹ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            const newReport = {
                id: reports.length + 1,
                title: title,
                category: category,
                priority: priority,
                description: description,
                status: 'new',
                author: currentUser.fullName,
                authorUsername: currentUser.username,
                date: new Date().toLocaleDateString('fa-IR'),
                time: new Date().toLocaleTimeString('fa-IR'),
                createdAt: new Date().toISOString()
            };
            
            reports.push(newReport);
            localStorage.setItem('reports', JSON.stringify(reports));
            
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ±Ù…
            document.getElementById('reportTitle').value = '';
            document.getElementById('reportCategory').value = '';
            document.getElementById('reportPriority').value = 'medium';
            document.getElementById('reportDescription').value = '';
            
            showNotification('Ú¯Ø²Ø§Ø±Ø´ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯', 'success');
            updateDashboard();
        }
        
        function filterReports() {
            const category = document.getElementById('filterCategory')?.value;
            const priority = document.getElementById('filterPriority')?.value;
            const status = document.getElementById('filterStatus')?.value;
            
            let filtered = reports;
            
            if (category) filtered = filtered.filter(r => r.category === category);
            if (priority) filtered = filtered.filter(r => r.priority === priority);
            if (status) filtered = filtered.filter(r => r.status === status);
            
            displayReportsTable(filtered);
        }
        
        function searchReports() {
            const query = document.getElementById('searchInput')?.value.toLowerCase();
            
            if (!query) {
                filterReports();
                return;
            }
            
            const filtered = reports.filter(r => 
                r.title.toLowerCase().includes(query) ||
                r.description.toLowerCase().includes(query) ||
                r.author.toLowerCase().includes(query) ||
                r.category.toLowerCase().includes(query)
            );
            
            displayReportsTable(filtered);
        }
        
        function displayReportsTable(reportsList) {
            const tbody = document.getElementById('reportsTableBody');
            if (!tbody) return;
            
            if (reportsList.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 40px; color: #7f8c8d;">
                            <i class="fas fa-inbox" style="font-size: 48px; margin-bottom: 15px; display: block; color: #ddd;"></i>
                            Ù‡ÛŒÚ† Ú¯Ø²Ø§Ø±Ø´ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = reportsList.map(report => `
                <tr>
                    <td>${report.id}</td>
                    <td><strong>${report.title}</strong></td>
                    <td>${report.category}</td>
                    <td>
                        <span style="background: ${getPriorityColor(report.priority)}; color: white; padding: 4px 10px; border-radius: 12px; font-size: 12px;">
                            ${getPriorityText(report.priority)}
                        </span>
                    </td>
                    <td>${report.status}</td>
                    <td>${report.date}</td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;" onclick="viewReport(${report.id})">
                            <i class="fas fa-eye"></i>
                        </button>
                        ${currentUser?.role === 'admin' ? `
                            <button class="btn btn-warning" style="padding: 5px 10px; font-size: 12px; margin-right: 5px;" onclick="editReportStatus(${report.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                        ` : ''}
                    </td>
                </tr>
            `).join('');
        }
        
        function getPriorityColor(priority) {
            const colors = {
                'low': '#27ae60',
                'medium': '#f39c12',
                'high': '#e74c3c',
                'critical': '#c0392b'
            };
            return colors[priority] || '#3498db';
        }
        
        function getPriorityText(priority) {
            const texts = {
                'low': 'Ú©Ù…',
                'medium': 'Ù…ØªÙˆØ³Ø·',
                'high': 'Ø¨Ø§Ù„Ø§',
                'critical': 'Ø¨Ø­Ø±Ø§Ù†ÛŒ'
            };
            return texts[priority] || priority;
        }
        
        function viewReport(id) {
            const report = reports.find(r => r.id === id);
            if (report) {
                alert(`Ø¹Ù†ÙˆØ§Ù†: ${report.title}\n\nØ¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ: ${report.category}\n\nØ§ÙˆÙ„ÙˆÛŒØª: ${getPriorityText(report.priority)}\n\nØªÙˆØ¶ÛŒØ­Ø§Øª: ${report.description}\n\nÙˆØ¶Ø¹ÛŒØª: ${report.status}\n\nÙ†ÙˆÛŒØ³Ù†Ø¯Ù‡: ${report.author}\n\nØªØ§Ø±ÛŒØ®: ${report.date} ${report.time}`);
            }
        }
        
        function editReportStatus(id) {
            if (currentUser.role !== 'admin') {
                showNotification('Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ ÙˆÛŒØ±Ø§ÛŒØ´ Ú¯Ø²Ø§Ø±Ø´ Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯', 'error');
                return;
            }
            
            const report = reports.find(r => r.id === id);
            if (report) {
                const newStatus = prompt('ÙˆØ¶Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯ Ú¯Ø²Ø§Ø±Ø´ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:', report.status);
                if (newStatus) {
                    report.status = newStatus;
                    localStorage.setItem('reports', JSON.stringify(reports));
                    filterReports();
                    showNotification('ÙˆØ¶Ø¹ÛŒØª Ú¯Ø²Ø§Ø±Ø´ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯', 'success');
                }
            }
        }
        
        // ==================== ØªÙˆØ§Ø¨Ø¹ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ ====================
        function loadAdvancedSearchFilters() {
            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§
            const categorySelect = document.getElementById('searchCategory');
            if (categorySelect) {
                categorySelect.innerHTML = '<option value="">Ù‡Ù…Ù‡ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</option>' +
                    categories.map(cat => `<option value="${cat}">${cat}</option>`).join('');
            }
            
            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù†ÙˆÛŒØ³Ù†Ø¯Ú¯Ø§Ù†
            const authorSelect = document.getElementById('searchAuthor');
            if (authorSelect) {
                const authors = [...new Set(reports.map(r => r.author))];
                authorSelect.innerHTML = '<option value="">Ù‡Ù…Ù‡ Ù†ÙˆÛŒØ³Ù†Ø¯Ú¯Ø§Ù†</option>' +
                    authors.map(author => `<option value="${author}">${author}</option>`).join('');
            }
        }
        
        function performAdvancedSearch() {
            // Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ ÙÛŒÙ„ØªØ±Ù‡Ø§
            const keyword = document.getElementById('searchKeyword')?.value.toLowerCase() || '';
            const dateFrom = document.getElementById('searchDateFrom')?.value;
            const dateTo = document.getElementById('searchDateTo')?.value;
            const category = document.getElementById('searchCategory')?.value;
            const priority = document.getElementById('searchPriority')?.value;
            const status = document.getElementById('searchStatus')?.value;
            const author = document.getElementById('searchAuthor')?.value;
            
            // Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ±Ù‡Ø§
            let results = reports;
            
            // Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ù„Ù…Ù‡ Ú©Ù„ÛŒØ¯ÛŒ
            if (keyword) {
                results = results.filter(r => 
                    r.title.toLowerCase().includes(keyword) ||
                    r.description.toLowerCase().includes(keyword) ||
                    r.author.toLowerCase().includes(keyword) ||
                    r.category.toLowerCase().includes(keyword)
                );
            }
            
            // ÙÛŒÙ„ØªØ± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
            if (category) {
                results = results.filter(r => r.category === category);
            }
            
            // ÙÛŒÙ„ØªØ± Ø§ÙˆÙ„ÙˆÛŒØª
            if (priority) {
                results = results.filter(r => r.priority === priority);
            }
            
            // ÙÛŒÙ„ØªØ± ÙˆØ¶Ø¹ÛŒØª
            if (status) {
                results = results.filter(r => r.status === status);
            }
            
            // ÙÛŒÙ„ØªØ± Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡
            if (author) {
                results = results.filter(r => r.author === author);
            }
            
            // ÙÛŒÙ„ØªØ± ØªØ§Ø±ÛŒØ®
            if (dateFrom || dateTo) {
                results = results.filter(r => {
                    if (!r.createdAt) return true;
                    
                    const reportDate = new Date(r.createdAt);
                    const fromDate = dateFrom ? new Date(dateFrom) : null;
                    const toDate = dateTo ? new Date(dateTo) : null;
                    
                    let valid = true;
                    if (fromDate) {
                        valid = valid && (reportDate >= fromDate);
                    }
                    if (toDate) {
                        valid = valid && (reportDate <= toDate);
                    }
                    return valid;
                });
            }
            
            // Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬
            displaySearchResults(results);
        }
        
        function displaySearchResults(results) {
            const tbody = document.getElementById('searchResultsBody');
            const exportBtn = document.getElementById('exportSearchBtn');
            const resultsCount = document.getElementById('resultsCount');
            const resultsCountContainer = document.getElementById('searchResultsCount');
            
            if (!tbody) return;
            
            if (results.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 40px; color: #7f8c8d;">
                            <i class="fas fa-search" style="font-size: 48px; margin-bottom: 15px; display: block; color: #ddd;"></i>
                            Ù‡ÛŒÚ† Ú¯Ø²Ø§Ø±Ø´ÛŒ Ø¨Ø§ Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø´Ù…Ø§ ÛŒØ§ÙØª Ù†Ø´Ø¯
                        </td>
                    </tr>
                `;
                exportBtn.style.display = 'none';
                resultsCountContainer.style.display = 'none';
                return;
            }
            
            resultsCount.textContent = results.length;
            resultsCountContainer.style.display = 'inline-block';
            
            tbody.innerHTML = results.map(report => `
                <tr>
                    <td>${report.id}</td>
                    <td><strong>${report.title}</strong></td>
                    <td>${report.category}</td>
                    <td>
                        <span style="background: ${getPriorityColor(report.priority)}; color: white; padding: 4px 10px; border-radius: 12px; font-size: 12px;">
                            ${getPriorityText(report.priority)}
                        </span>
                    </td>
                    <td>
                        <span style="display: inline-block; padding: 3px 10px; border-radius: 12px; font-size: 12px; 
                              background: ${report.status === 'completed' ? '#e8f6f3' : report.status === 'pending' ? '#fff3e0' : '#e8f4fd'}; 
                              color: ${report.status === 'completed' ? '#27ae60' : report.status === 'pending' ? '#f39c12' : '#3498db'};">
                            ${report.status === 'completed' ? 'ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡' : report.status === 'pending' ? 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ' : 'Ø¬Ø¯ÛŒØ¯'}
                        </span>
                    </td>
                    <td>${report.author}</td>
                    <td>${report.date}</td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;" onclick="viewReport(${report.id})">
                            <i class="fas fa-eye"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
            
            exportBtn.style.display = 'inline-block';
            showNotification(`ØªØ¹Ø¯Ø§Ø¯ ${results.length} Ú¯Ø²Ø§Ø±Ø´ ÛŒØ§ÙØª Ø´Ø¯`, 'success');
        }
        
        function resetAdvancedSearch() {
            document.getElementById('searchKeyword').value = '';
            document.getElementById('searchDateFrom').value = '';
            document.getElementById('searchDateTo').value = '';
            document.getElementById('searchCategory').value = '';
            document.getElementById('searchPriority').value = '';
            document.getElementById('searchStatus').value = '';
            document.getElementById('searchAuthor').value = '';
            
            const tbody = document.getElementById('searchResultsBody');
            if (tbody) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 40px; color: #7f8c8d;">
                            Ù„Ø·ÙØ§Ù‹ Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯
                        </td>
                    </tr>
                `;
            }
            
            document.getElementById('exportSearchBtn').style.display = 'none';
            document.getElementById('searchResultsCount').style.display = 'none';
        }
        
        function exportSearchResults() {
            const tbody = document.getElementById('searchResultsBody');
            const rows = tbody.querySelectorAll('tr');
            
            if (rows.length === 0 || rows[0].querySelector('td').colSpan === "8") {
                showNotification('Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯', 'warning');
                return;
            }
            
            let csv = 'Ø´Ù†Ø§Ø³Ù‡,Ø¹Ù†ÙˆØ§Ù†,Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ,Ø§ÙˆÙ„ÙˆÛŒØª,ÙˆØ¶Ø¹ÛŒØª,Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡,ØªØ§Ø±ÛŒØ®\n';
            
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                if (cells.length >= 7) {
                    const id = cells[0].textContent;
                    const title = cells[1].querySelector('strong')?.textContent || cells[1].textContent;
                    const category = cells[2].textContent;
                    const priority = cells[3].querySelector('span')?.textContent || cells[3].textContent;
                    const status = cells[4].querySelector('span')?.textContent || cells[4].textContent;
                    const author = cells[5].textContent;
                    const date = cells[6].textContent;
                    
                    csv += `"${id}","${title}","${category}","${priority}","${status}","${author}","${date}"\n`;
                }
            });
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `search-results-${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯', 'success');
        }
        
        // ==================== ØªÙˆØ§Ø¨Ø¹ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ====================
        function updateUsersTable() {
            const tbody = document.getElementById('usersTableBody');
            if (!tbody) return;
            
            if (users.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 40px; color: #7f8c8d;">
                            <i class="fas fa-users" style="font-size: 48px; margin-bottom: 15px; display: block; color: #ddd;"></i>
                            Ù‡ÛŒÚ† Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = users.map(user => `
                <tr>
                    <td>${user.id}</td>
                    <td><strong>${user.username}</strong></td>
                    <td>${user.fullName}</td>
                    <td>${user.email || '-'}</td>
                    <td>
                        <span style="display: inline-block; padding: 3px 10px; border-radius: 15px; font-size: 12px; 
                              background: ${user.role === 'admin' ? '#e8f6f3' : '#e8f4fd'}; 
                              color: ${user.role === 'admin' ? '#27ae60' : '#3498db'};">
                            ${user.role === 'admin' ? 'Ù…Ø¯ÛŒØ±' : 'Ú©Ø§Ø±Ø¨Ø±'}
                        </span>
                    </td>
                    <td>
                        <span style="display: inline-block; padding: 3px 10px; border-radius: 15px; font-size: 12px; 
                              background: ${user.status === 'active' ? '#e8f6f3' : '#fdedec'}; 
                              color: ${user.status === 'active' ? '#27ae60' : '#e74c3c'};">
                            ${user.status === 'active' ? 'ÙØ¹Ø§Ù„' : 'ØºÛŒØ±ÙØ¹Ø§Ù„'}
                        </span>
                    </td>
                    <td>${user.createdAt}</td>
                    <td>
                        ${currentUser?.role === 'admin' && currentUser.id !== user.id ? `
                            <button class="btn btn-warning" style="padding: 5px 10px; font-size: 12px; margin-left: 5px;" onclick="editUserRole(${user.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-danger" style="padding: 5px 10px; font-size: 12px;" onclick="toggleUserStatus(${user.id})">
                                <i class="fas fa-user-slash"></i>
                            </button>
                        ` : '-'}
                    </td>
                </tr>
            `).join('');
        }
        
        function showAddUserModal() {
            if (currentUser.role !== 'admin') {
                showNotification('Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯', 'error');
                return;
            }
            
            const fullName = prompt('Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯:');
            if (!fullName) return;
            
            const username = prompt('Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ:');
            if (!username) return;
            
            if (users.some(u => u.username === username)) {
                showNotification('Ø§ÛŒÙ† Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª', 'error');
                return;
            }
            
            const password = prompt('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±:');
            if (!password) return;
            
            const email = prompt('Ø§ÛŒÙ…ÛŒÙ„ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ):');
            const phone = prompt('ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ):');
            
            const newUser = {
                id: users.length + 1,
                username: username,
                password: password,
                fullName: fullName,
                email: email || '',
                phone: phone || '',
                role: 'user',
                status: 'active',
                createdAt: new Date().toLocaleDateString('fa-IR')
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            updateUsersTable();
            showNotification('Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯', 'success');
        }
        
        function editUserRole(id) {
            if (currentUser.role !== 'admin') {
                showNotification('Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯', 'error');
                return;
            }
            
            const user = users.find(u => u.id === id);
            if (!user) return;
            
            const newRole = prompt(`Ù†Ù‚Ø´ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ ${user.fullName} (admin/user):`, user.role);
            if (newRole && ['admin', 'user'].includes(newRole)) {
                user.role = newRole;
                localStorage.setItem('users', JSON.stringify(users));
                updateUsersTable();
                showNotification('Ù†Ù‚Ø´ Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯', 'success');
            }
        }
        
        function toggleUserStatus(id) {
            if (currentUser.role !== 'admin') {
                showNotification('Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯', 'error');
                return;
            }
            
            const user = users.find(u => u.id === id);
            if (!user) return;
            
            user.status = user.status === 'active' ? 'inactive' : 'active';
            localStorage.setItem('users', JSON.stringify(users));
            updateUsersTable();
            showNotification(`ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ ${user.status === 'active' ? 'ÙØ¹Ø§Ù„' : 'ØºÛŒØ±ÙØ¹Ø§Ù„'} ØªØºÛŒÛŒØ± Ú©Ø±Ø¯`, 'success');
        }
        
        // ==================== ØªÙˆØ§Ø¨Ø¹ Ø³ÛŒØ³ØªÙ… ====================
        function saveSystemSettings() {
            if (currentUser.role !== 'admin') {
                showNotification('Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ ØªØºÛŒÛŒØ± ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯', 'error');
                return;
            }
            
            systemSettings = {
                systemName: document.getElementById('systemName').value,
                maxFileSize: parseInt(document.getElementById('maxFileSize').value),
                retentionDays: parseInt(document.getElementById('retentionDays').value)
            };
            
            localStorage.setItem('systemSettings', JSON.stringify(systemSettings));
            showNotification('ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ… Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯', 'success');
        }
        
        function backupData() {
            const data = {
                reports: reports,
                users: users,
                categories: categories,
                settings: systemSettings,
                backupDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÚ¯ÛŒØ±ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯', 'success');
        }
        
        function restoreData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    try {
                        const data = JSON.parse(e.target.result);
                        
                        if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ú©Ù†ÛŒØ¯ØŸ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ¹Ù„ÛŒ Ù¾Ø§Ú© Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.')) {
                            localStorage.setItem('reports', JSON.stringify(data.reports || []));
                            localStorage.setItem('users', JSON.stringify(data.users || []));
                            localStorage.setItem('categories', JSON.stringify(data.categories || []));
                            localStorage.setItem('systemSettings', JSON.stringify(data.settings || {}));
                            
                            showNotification('Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø´Ø¯Ù†Ø¯', 'success');
                            location.reload();
                        }
                    } catch(err) {
                        showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø®ÙˆØ§Ù†Ø¯Ù† ÙØ§ÛŒÙ„ Ù¾Ø´ØªÛŒØ¨Ø§Ù†', 'error');
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }
        
        function exportToExcel() {
            const data = reports.map(r => ({
                'Ø´Ù†Ø§Ø³Ù‡': r.id,
                'Ø¹Ù†ÙˆØ§Ù†': r.title,
                'Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ': r.category,
                'Ø§ÙˆÙ„ÙˆÛŒØª': getPriorityText(r.priority),
                'ÙˆØ¶Ø¹ÛŒØª': r.status,
                'Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡': r.author,
                'ØªØ§Ø±ÛŒØ®': r.date,
                'Ø²Ù…Ø§Ù†': r.time
            }));
            
            let csv = 'Ø¹Ù†ÙˆØ§Ù†,Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ,Ø§ÙˆÙ„ÙˆÛŒØª,ÙˆØ¶Ø¹ÛŒØª,Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡,ØªØ§Ø±ÛŒØ®,Ø²Ù…Ø§Ù†\n';
            data.forEach(row => {
                csv += `"${row.Ø¹Ù†ÙˆØ§Ù†}","${row['Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ']}","${row.Ø§ÙˆÙ„ÙˆÛŒØª}","${row.ÙˆØ¶Ø¹ÛŒØª}","${row.Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡}","${row.ØªØ§Ø±ÛŒØ®}","${row.Ø²Ù…Ø§Ù†}"\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `reports-${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Ø®Ø±ÙˆØ¬ÛŒ Excel ØªÙ‡ÛŒÙ‡ Ø´Ø¯', 'success');
        }
        
        // ==================== ØªÙˆØ§Ø¨Ø¹ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ ====================
        function loadProfileData() {
            if (!currentUser) return;
            
            document.getElementById('profileFullName').value = currentUser.fullName || '';
            document.getElementById('profileEmail').value = currentUser.email || '';
            document.getElementById('profilePhone').value = currentUser.phone || '';
            document.getElementById('profileNewPassword').value = '';
            document.getElementById('profileConfirmPassword').value = '';
        }
        
        function updateProfile() {
            if (!currentUser) return;
            
            const fullName = document.getElementById('profileFullName').value.trim();
            const email = document.getElementById('profileEmail').value.trim();
            const phone = document.getElementById('profilePhone').value.trim();
            const newPassword = document.getElementById('profileNewPassword').value;
            const confirmPassword = document.getElementById('profileConfirmPassword').value;
            
            if (!fullName) {
                showNotification('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            if (newPassword && newPassword !== confirmPassword) {
                showNotification('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯ Ùˆ ØªÚ©Ø±Ø§Ø± Ø¢Ù† ÛŒÚ©Ø³Ø§Ù† Ù†ÛŒØ³ØªÙ†Ø¯', 'error');
                return;
            }
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
            currentUser.fullName = fullName;
            currentUser.email = email;
            currentUser.phone = phone;
            
            if (newPassword) {
                currentUser.password = newPassword;
            }
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯Ø± Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
            const userIndex = users.findIndex(u => u.id === currentUser.id);
            if (userIndex !== -1) {
                users[userIndex] = currentUser;
            }
            
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´
            document.getElementById('userName').textContent = currentUser.fullName;
            
            showNotification('Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯', 'success');
        }
        
        // ==================== Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ====================
        function init() {
            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§Ø² localStorage
            if (localStorage.getItem('reports')) {
                reports = JSON.parse(localStorage.getItem('reports'));
            }
            
            if (localStorage.getItem('users')) {
                users = JSON.parse(localStorage.getItem('users'));
            }
            
            if (localStorage.getItem('categories')) {
                categories = JSON.parse(localStorage.getItem('categories'));
            }
            
            if (localStorage.getItem('systemSettings')) {
                systemSettings = JSON.parse(localStorage.getItem('systemSettings'));
            }
            
            // Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø§Ø±Ø¨Ø± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                document.getElementById('mainHeader').classList.add('logged-in');
                document.getElementById('mainNav').classList.add('logged-in');
                document.getElementById('userName').textContent = currentUser.fullName;
                document.getElementById('userRole').textContent = `(${currentUser.role === 'admin' ? 'Ù…Ø¯ÛŒØ±' : 'Ú©Ø§Ø±Ø¨Ø±'})`;
                
                // Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
                showPage('dashboard');
                
                // Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† Ù…Ù†ÙˆÙ‡Ø§ÛŒ Ø§Ø¯Ù…ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…Ø¹Ù…ÙˆÙ„ÛŒ
                if (currentUser.role !== 'admin') {
                    document.getElementById('btnAdmin').style.display = 'none';
                    document.getElementById('btnUsers').style.display = 'none';
                    document.getElementById('btnCategories').style.display = 'none';
                }
            }
        }
        
        // Ø§Ø¬Ø±Ø§ÛŒ Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>
